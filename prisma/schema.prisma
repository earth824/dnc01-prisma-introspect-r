generator client {
  provider = "prisma-client-js"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
}

model Album {
  albumId  Int    @id(map: "PK_Album") @map("AlbumId")
  title    String @db.VarChar(160) @map("Title")
  artistId Int    @map("ArtistId")

  artist Artist @relation(fields: [artistId], references: [artistId], map: "FK_AlbumArtistId")
  track  Track[]

  @@index([artistId], map: "IFK_AlbumArtistId")
}

model Artist {
  artistId Int     @id(map: "PK_Artist") @map("ArtistId")
  name     String? @db.VarChar(120) @map("Name")
  album    Album[]
}

model Customer {
  customerId   Int    @id(map: "PK_Customer") @map("CustomerId")
  firstName    String @db.VarChar(40) @map("FirstName")
  lastName     String @db.VarChar(20) @map("LastName")
  company      String? @db.VarChar(80) @map("Company")
  address      String? @db.VarChar(70) @map("Address")
  city         String? @db.VarChar(40) @map("City")
  state        String? @db.VarChar(40) @map("State")
  country      String? @db.VarChar(40) @map("Country")
  postalCode   String? @db.VarChar(10) @map("PostalCode")
  phone        String? @db.VarChar(24) @map("Phone")
  fax          String? @db.VarChar(24) @map("Fax")
  email        String  @db.VarChar(60) @map("Email")
  supportRepId Int?   @map("SupportRepId")

  employee Employee? @relation(fields: [supportRepId], references: [employeeId], map: "FK_CustomerSupportRepId")
  invoice  Invoice[]

  @@index([supportRepId], map: "IFK_CustomerSupportRepId")
}

model Employee {
  employeeId Int    @id(map: "PK_Employee") @map("EmployeeId")
  lastName   String @db.VarChar(20) @map("LastName")
  firstName  String @db.VarChar(20) @map("FirstName")
  title      String? @db.VarChar(30) @map("Title")
  reportsTo  Int?   @map("ReportsTo")
  birthDate  DateTime? @db.Timestamp(6) @map("BirthDate")
  hireDate   DateTime? @db.Timestamp(6) @map("HireDate")
  address    String? @db.VarChar(70) @map("Address")
  city       String? @db.VarChar(40) @map("City")
  state      String? @db.VarChar(40) @map("State")
  country    String? @db.VarChar(40) @map("Country")
  postalCode String? @db.VarChar(10) @map("PostalCode")
  phone      String? @db.VarChar(24) @map("Phone")
  fax        String? @db.VarChar(24) @map("Fax")
  email      String? @db.VarChar(60) @map("Email")

  customer Customer[]
  manager  Employee?  @relation("EmployeeToEmployee", fields: [reportsTo], references: [employeeId], map: "FK_EmployeeReportsTo")
  staff    Employee[] @relation("EmployeeToEmployee")

  @@index([reportsTo], map: "IFK_EmployeeReportsTo")
}

model Genre {
  genreId Int     @id(map: "PK_Genre") @map("GenreId")
  name    String? @db.VarChar(120) @map("Name")
  track   Track[]
}

model Invoice {
  invoiceId         Int      @id(map: "PK_Invoice") @map("InvoiceId")
  customerId        Int      @map("CustomerId")
  invoiceDate       DateTime @db.Timestamp(6) @map("InvoiceDate")
  billingAddress    String?  @db.VarChar(70) @map("BillingAddress")
  billingCity       String?  @db.VarChar(40) @map("BillingCity")
  billingState      String?  @db.VarChar(40) @map("BillingState")
  billingCountry    String?  @db.VarChar(40) @map("BillingCountry")
  billingPostalCode String?  @db.VarChar(10) @map("BillingPostalCode")
  total             Decimal  @db.Decimal(10,2) @map("Total")

  customer    Customer    @relation(fields: [customerId], references: [customerId], map: "FK_InvoiceCustomerId")
  invoiceLine InvoiceLine[]

  @@index([customerId], map: "IFK_InvoiceCustomerId")
}

model InvoiceLine {
  invoiceLineId Int     @id(map: "PK_InvoiceLine") @map("InvoiceLineId")
  invoiceId     Int     @map("InvoiceId")
  trackId       Int     @map("TrackId")
  unitPrice     Decimal @db.Decimal(10,2) @map("UnitPrice")
  quantity      Int     @map("Quantity")

  invoice Invoice @relation(fields: [invoiceId], references: [invoiceId], map: "FK_InvoiceLineInvoiceId")
  track   Track   @relation(fields: [trackId], references: [trackId], map: "FK_InvoiceLineTrackId")

  @@index([invoiceId], map: "IFK_InvoiceLineInvoiceId")
  @@index([trackId], map: "IFK_InvoiceLineTrackId")
}

model MediaType {
  mediaTypeId Int     @id(map: "PK_MediaType") @map("MediaTypeId")
  name        String? @db.VarChar(120) @map("Name")
  track       Track[]
}

model Playlist {
  playlistId Int     @id(map: "PK_Playlist") @map("PlaylistId")
  name       String? @db.VarChar(120) @map("Name")
  playlistTrack PlaylistTrack[]
}

model PlaylistTrack {
  playlistId Int @map("PlaylistId")
  trackId    Int @map("TrackId")

  playlist Playlist @relation(fields: [playlistId], references: [playlistId], map: "FK_PlaylistTrackPlaylistId")
  track    Track    @relation(fields: [trackId], references: [trackId], map: "FK_PlaylistTrackTrackId")

  @@id([playlistId, trackId], map: "PK_PlaylistTrack")
  @@index([trackId], map: "IFK_PlaylistTrackTrackId")
}

model Track {
  trackId      Int     @id(map: "PK_Track") @map("TrackId")
  name         String  @db.VarChar(200) @map("Name")
  albumId      Int?    @map("AlbumId")
  mediaTypeId  Int     @map("MediaTypeId")
  genreId      Int?    @map("GenreId")
  composer     String? @db.VarChar(220) @map("Composer")
  milliseconds Int     @map("Milliseconds")
  bytes        Int?    @map("Bytes")
  unitPrice    Decimal @db.Decimal(10,2) @map("UnitPrice")

  invoiceLine   InvoiceLine[]
  playlistTrack PlaylistTrack[]

  album     Album?    @relation(fields: [albumId], references: [albumId], map: "FK_TrackAlbumId")
  genre     Genre?    @relation(fields: [genreId], references: [genreId], map: "FK_TrackGenreId")
  mediaType MediaType @relation(fields: [mediaTypeId], references: [mediaTypeId], map: "FK_TrackMediaTypeId")

  @@index([albumId], map: "IFK_TrackAlbumId")
  @@index([genreId], map: "IFK_TrackGenreId")
  @@index([mediaTypeId], map: "IFK_TrackMediaTypeId")
}